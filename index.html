<!DOCTYPE html>
<html>
  <head>
    <title>Aurelia</title>
    <link rel="stylesheet" href="jspm_packages/npm/font-awesome@4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="styles/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>

  <body aurelia-app="main">
    <div class="splash">
      <div class="message">Music experiments</div>
      <i class="fa fa-spinner fa-spin"></i>
    </div>
    <script src="jspm_packages/npm/bluebird@3.3.5/js/browser/bluebird.min.js"></script>
    <script src="jspm_packages/system.js"></script>
    <script src="config.js"></script>
    <script>
      System.import('aurelia-bootstrapper');
    </script>
    <script src="midi/Base64binary.js" type="text/javascript"></script>
    <script src="midi/MIDI.min.js" type="text/javascript"></script>
    <script type="text/javascript">

    window.onload = function () {
    	MIDI.loadPlugin({
    		soundfontUrl: "midi/soundfont/",
        //instrument: "acoustic_grand_piano_mp3.js",
       instruments: ["acoustic_grand_piano", "synth_drum"],
    		onprogress: function(state, progress) {
    			console.log(state, progress);
    		},
    		onsuccess: function() {
          MIDI.programChange(0, 0);  // piano
          MIDI.programChange(1, 118); // drums
          console.log("MIDI loaded!")
    		}
    	});
    };
    </script>
  </body>
</html>
